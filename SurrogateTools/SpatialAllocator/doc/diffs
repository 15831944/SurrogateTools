foreach? 
foreach? 
[K6c6
< <title>Spatially Allocating Attributes</title>
---
> <title>General Spatial Allocation</title>
11,13c11,13
< <H2>7.1. Spatially Allocating Attributes</H2>
< <H3>7.1.1 Modes of the Allocator Program</H3>
< <P>The allocator program supports ALLOCATE mode for operating on shapefiles, point files, polygon files, I/O API files and regular grid shapefiles. <b>NOTE: I/O API files are not currently supported on Windows.</b>  
---
> <H2>10. General Spatial Allocation and Overlays</H2>
> <H3>10.1 Modes of the Allocator Program</H3>
> <P>The allocator program supports ALLOCATE and OVERLAY modes for operating on shapefiles, point files, polygon files, I/O API files and regular grid shapefiles. <b>NOTE: I/O API files are not currently supported on Windows.</b>  
28a29,31
> <p>The second mode discussed in this section, the OVERLAY mode, allows the user to specify a grid, bounding box, polygon, or set of polygons and then print the attributes of the shapes 
> (i.e., points, lines, or polygons) from an input data file that fall within the boundaries of the specified region.  One example
> of how this mode might be used is to start with a data set from a group of observation stations in a particular region and then overlay those data with a grid to determine which grid cells the observation stations reside in. The results may be printed to standard output or saved to a delimited file.  Eventually, we may also be able to save the data to a shapefile or an I/O API file.</p>
30c33
< <h3>7.1.2 Allocate Mode</h3>
---
> <h3>10.2 Allocate Mode</h3>
68c71
< <h3>7.1.3 Allocate Mode Examples</h3> 
---
> <h3>10.3 Allocate Mode Examples</h3> 
139c142
< <h3>7.1.4 Allocating Discrete Values</h3>
---
> <h3>10.4 Allocating Discrete Values</h3>
199c202
< <h3>7.1.5 Discretization Interval</h3>
---
> <h3>10.5 Discretization Interval</h3>
213a217,312
> <h3>10.6 Overlay Printing Mode</h3>
> <p>When MIMS_PROCESSING is set to OVERLAY (a new processing mode in version 3.0), the Spatial Allocator 
> responds to the following environment variables (bold text indicates required fields):</p>
> <ul>
> <li><strong>OVERLAY_TYPE</strong> – The type of the overlay shape (valid values  are BoundingBox, PolygonFile, ShapeFile, and RegularGrid)</li>
> <li><strong>OVERLAY_SHAPE</strong> – The shape name or information used to define a region of interest in overlays.  If OVERLAY_TYPE is:
>   <ul>
>     <li>BoundingBox, specify as: x1,y1,x2,y2
>     <li>RegularGrid, specify the name of a grid (when used, this requires  GRIDDESC to be set)
>     <li>ShapeFile, specify the name of a shapefile (note that the OVERLAY region is the union of all of the polygons in the shapefile)
>     <li>PolygonFile, specify the name of an ASCII polygon file; each line of the file should contain two values with the following format:  xcoord  ycoord.  Note that the polygon will automatically be closed, and the points should be specified in a clockwise manner so that they are not interpreted as a hole
>     </ul></li>
> 
> <li><b>OVERLAY_MAP_PRJN</b> – The map projection of the overlay shape</li>
> <li><b>OVERLAY_ELLIPSOID</b> – The ellipsoid for the overlay shape</li>
> <li><b>OVERLAY_ATTRS</b> – Set to ALL or a comma-separated list of attribute names for which values will be printed </li>
> <li><b>INPUT_FILE_NAME</b> – Name of the file containing input data for spatial allocation</li>
> <li><b>INPUT_FILE_TYPE</b> – Shapefile, PointFile, IoapiFile, or RegularGrid</li>
> <li><b>INPUT_FILE_MAP_PRJN</b> – The map projection of the INPUT_FILE_NAME file</li>
> <li><b>INPUT_FILE_ELLIPSOID</b> – The ellipsoid of the INPUT_FILE_NAME file</li>
> <li>GRIDDESC – grid description file name (only when using OVERLAY_GRID)</li>
> <li>INPUT_GRID_NAME – Name of input grid (when INPUT_FILE_TYPE is RegularGrid)</li>
> <li>INPUT_FILE_DELIM – The delimiter that is used for the PointFile (when INPUT_FILE_TYPE is PointFile)</li>
> <li>INPUT_FILE_XCOL – The name of the column containing <em>x</em> coordinates in the PointFile (when INPUT_FILE_TYPE is PointFile)</li>
> <li>INPUT_FILE_YCOL – The name of the column containing <em>y</em> coordinates in the PointFile (when INPUT_FILE_TYPE is PointFile)</li>
> <li><b>OVERLAY_OUT_TYPE</b> – The type of output; specify either Stdout or DelimitedFile (eventually also Shapefile)</li>
> <li><b>OVERLAY_OUT_NAME</b> – The name of the output file; specify either Stdout or a file name </li>
> <li><b>OVERLAY_OUT_DELIM</b> – A constant that specifies the type of delimiter to use for the 
> DelimitedFile output type (note that a PointFile is a special case of DelimitedFile &ndash; but DelimitedFile is used here because the output file does not need to be a PointFile since the shapes may not be points)</li>
> <li><b>WRITE_HEADER</b> – Y or N (specifies whether to write a header line to give the names of the output attributes)</li>
> <li><b>DEBUG_OUTPUT</b> –Y or N (specifies whether to write the debug output to standard output; this can be used to make the program  output only critical information)</li>
> </ul>
> 
> <h3>Overlay Mode Examples</h3>
> <P>Example overlay scripts are provided for Unix/Linux in C-shell format (.csh extension appended) and 
>  for Microsoft Windows in DOS batch file format (.bat extension appended). These scripts can be executed directly from the scripts 
>  directory. If desired, you may edit the overlay script and set the BASDIR to your new installation folder. 
>  The scripts place their output shapefiles in the output directory. The output files can be viewed with a GIS. </P>
> <P>Several different overlay example scripts have been provided in order to give the reader an overview of how this new processing mode operates. The sample scripts for the overlay mode are:</p>
> <ul><li>overlay_county_on_grid</li>
> <li>overlay_grid_on_counties</li>
> <li>overlay_grid_on_ports</li>
> <li>overlay_polygon_on_census_tracts</li>
> </ul>
> <p>The Unix version of the overlay_grid_on_ports script is presented below as an example.   The 
> OVERLAY_TYPE is a bounding box, which means that OVERLAY_SHAPE will be set to a pair of <em>x,y</em> coordinates instead of to a file name. In all other cases, the OVERLAY_SHAPE is a file name. The 
> file that is being overlaid by the bounding box is a shapefile with the same map projection as 
> the bounding box (but this need not be the case, as the allocator program will convert between 
> map projections as needed). The overlay output is being placed in a delimited file, as specified 
> by OVERLAY_OUT_TYPE. The delimiter will be a COMMA, as specified by OVERLAY_OUT_DELIM. Because 
> WRITE_HEADER is set to Y (yes), the names of the OVERLAY_ATTRS 
> 
> 
> &mdash;  in this case, NAME, BERTHS, LAT, 
> and LONG 
> 
> 
> &mdash;  will be provided on the first row of ports_over_grid.csv. The MAX_INPUT_FILE_SHAPES variable can be set to any nonzero integer value to enable data "chunking" of the input file 
> so that it is processed piecemeal instead of all at once. This reduces memory overhead in the 
> program. Input file chunking is handy when very large shapefiles are being processed. </p>
> <pre>
> # Set debug output
> setenv DEBUG_OUTPUT Y
> 
> # Set executable
> setenv MIMSDIR ..
> setenv EXE "$MIMSDIR/allocator.exe"
> 
> # Set Input Directory
> setenv DATADIR $MIMSDIR/data
> setenv OUTPUT $MIMSDIR/output
> 
> # Select method of spatial analysis
> 
> setenv MIMS_PROCESSING OVERLAY
> 
> setenv TIME time
> 
> setenv OVERLAY_SHAPE 1000000.0,-536000.0,1368000.0,-200000.0
> setenv OVERLAY_TYPE BoundingBox
> setenv OVERLAY_MAP_PRJN "+proj=lcc,+lon_0=-100.0,+lat_1=30.0,+lat_2=60.0,+lat_0=40.0"
> setenv OVERLAY_ELLIPSOID SPHERE
> setenv OVERLAY_ATTRS NAME,BERTHS,LAT,LONG
> setenv INPUT_FILE_NAME $DATADIR/tn_ports
> setenv INPUT_FILE_TYPE ShapeFile
> setenv INPUT_FILE_ELLIPSOID SPHERE
> setenv INPUT_FILE_MAP_PRJN "+proj=lcc,+lon_0=-100.0,+lat_1=30.0,+lat_2=60.0,+lat_0=40.0"
> setenv OVERLAY_OUT_TYPE DelimitedFile
> setenv OVERLAY_OUT_NAME $OUTPUT/ports_over_grid.csv
> setenv OVERLAY_OUT_DELIM COMMA
> setenv WRITE_HEADER Y
> #setenv MAX_INPUT_FILE_SHAPES 40
> 
> echo "Overlaying ports with a grid (bounding box of grid)"
> $TIME $EXE
> </pre>
215c314
< <p>To Section 7.2: <a href=overlay.html>Overlaying Spatail Data</a></p>
---
> <p>To Section 11: <a href=filters.html>Generating a Filtered Shapefile or Surrogate</a></p>
33c33
< <p>To Section 3: <a href=surrogates.html>Surrogate Computatiion and Quality Summary</a>
---
> <p>To Section 3: <a href=installing.html>Installing and Running the Test Case</a>
6c6
< <title>Converting Map Projections of ShapeFiles</title>
---
> <title>Converting Shapefiles to Different Map Projections</title>
11c11
< <H2><A name="convert_shape"></A>7.4. Converting Map Projections of ShapeFiles </H2>
---
> <H2><A name="convert_shape"></A>12. Converting Shapefiles to Different Map Projections </H2>
15,18c15
< file name of the output file (file names are without extensions).  <b>Note that the current version of the Spatail Allocator does
< not support any geographic transformation in projection.  If geographic datum or ellipsoid of input projection is
< different from that of output projection to be converted to, an error will occur and users have to do geographic transformation outside 
< the Spatial Allocator before doing any projection conversion in the Allocator.</b>
---
> file name of the output file (file names are without extensions). 
58c55
< <p>To section 8: <a href=rev_history.html>Revision History</a>
---
> <p>To section 13: <a href=smoke_bio_inputs.html>Creating Inputs to SMOKE Biogenic Processing</a>
6c6
< <title>Environment Variables Used by the Software</title>
---
> <title>Environment Variables</title>
11c11
< <H2><A name="envt vars"></a>3.3. Environment Variables Used by the Software</h2>
---
> <H2><A name="envt vars"></a>4. Environment Variables Used by the Software</h2>
14c14
< <h3>3.3.1 Helper Variables Found in Scripts</h3>
---
> <h3>4.1 Helper Variables Found in Scripts</h3>
30c30
< <h3>3.3.2 Program Control Variables</h3>
---
> <h3>4.2 Program Control Variables</h3>
43c43
< <h3>3.3.3 Surrogate Input Specification Variables</h3>
---
> <h3>4.3 Surrogate Input Specification Variables</h3>
68c68
< <h3>3.3.4 Surrogate Output Specification Variables </h3>
---
> <h3>4.4 Surrogate Output Specification Variables </h3>
71,72c71
< <LI>OUTPUT_FORMAT - Current only SMOKE format is supported.</LI>
< <LI>SURROGATE_ID - The integer used to designate a particular surrogate (e.g., 7 represents households). 
---
>   <LI>SURROGATE_ID - The integer used to designate a particular surrogate (e.g., 7 represents households). 
98,100d96
< <LI>DENOMINATOR_THRESHOLD -The value of a denominator threshold under which the surrogate values will not be used.  Instead, 
< the surrogate value is output as comment line with # sign if denominator is less than the threshold.
< The default value is 0.00001.</li>
106c102
< <h3>3.3.5 Map Projection and GRID Specification Variables</h3>
---
> <h3>4.5 Map Projection and GRID Specification Variables</h3>
118,126c114
<   <LI>OUTPUT_GRID_NAME - The name of the output grid for surrogate processing or spatial allocation (this must exist as a grid name in the GRIDDESC file).  This variable is required by srgcreate.exe.  It is also required by allocator.exe when the output file type is IoapiFile or RegularGrid.</li> 
<   <LI>OUTPUT_POLY_FILE - For Polygon OUTPUT_FILE_TYPE a shapefile is specified.  For EGrid, an arcGIS polygon
< text file is specified.</li>
<   <LI>OUTPUT_POLY_ATTR - For Polygon OUTPUT_FILE_TYPE an attribute of the shapefile defined by 
< OUTPUT_POLY_FILE is specified.</li>
<   <LI>OUTPUT_FILE_MAP_PRJN - The output map projection when OUTPUT_FILE_TYPE is Polygon for srgcreate.  Or, it is the name of a grid or a list of PROJ.4 map projection 
<   parameters for the output shapes. Leave unset or set to LATLON to use latitude-longitude. 
<   This is not used when the output file is RegularGrid, IoapiFile, and EGrid, as the map 
<   projection is read looked up in the GRIDDESC file for the grid specified by OUTPUT_GRID_NAME.</li>
---
>   <LI>OUTPUT_GRID_NAME - The name of the output grid for surrogate processing or spatial allocation (this must exist as a grid name in the GRIDDESC file).  This variable is required by srgcreate.exe.  It is also required by allocator.exe when the output file type is IoapiFile or RegularGrid.</li>
130c118
< <p>The following variables are used by allocator.exe:</p>
---
> <p>The following variables are used by both allocator.exe only:</p>
132c120
<   <li>INPUT_GRID_NAME – (Optional) Name of input grid (when INPUT_FILE_TYPE is RegularGrid)</li>
---
> <li>INPUT_GRID_NAME – (Optional) Name of input grid (when INPUT_FILE_TYPE is RegularGrid)</li>
134a123
>   <LI>OUTPUT_FILE_MAP_PRJN - (Optional) The name of a grid or a list of PROJ.4 map projection parameters for the output shapes. Leave unset or set to LATLON to use latitude-longitude. This is not used when the output file is RegularGrid or IoapiFile, as the map projection is read looked up in the GRIDDESC file for the grid specified by OUTPUT_GRID_NAME.</li>
137c126
< <h3>3.3.6 Variables Specifying Input and Output File Characteristics</h3>
---
> <h3>4.6 Variables Specifying Input and Output File Characteristics</h3>
146,147c135,136
< <LI>OUTPUT_FILE_TYPE - Three types are currently supported: RegularGrid, EGrid, and Polygon.</li>
< <LI>OUTPUT_FILE_NAME - Directory and name of output file (without extension when OUTPUT_FILE_TYPE is ShapeFile or RegularGrid; with extension when OUTPUT_FILE_TYPE is IoapiFile). </li>
---
> <LI>OUTPUT_FILE_TYPE &ndash; Type of file to output. Currently recognized values are RegularGrid, ShapeFile, and IoapiFile.</li>
> <LI>OUTPUT_FILE_NAME &ndash; Directory and name of output file (without extension when OUTPUT_FILE_TYPE is ShapeFile or RegularGrid; with extension when OUTPUT_FILE_TYPE is IoapiFile). </li>
150c139
< <h3>3.3.7 Overlay Mode Specific Variables</h3>
---
> <h3>4.7 Overlay Mode Specific Variables</h3>
153,154c142,143
< <li>OVERLAY_TYPE - Specifies the type of shape that will be used as the overlay mask.  Valid values are RegularGrid, ShapeFile, PolygonFile, or BoundingBox.
< <li>OVERLAY_SHAPE - Specifies the shape that will be used as the overlay mask, based on the value of OVERLAY_TYPE. This variable can  contain either a grid name, file name or, in the case of a BoundingBox, a set of coordinates.
---
> <li>OVERLAY_TYPE &ndash; Specifies the type of shape that will be used as the overlay mask.  Valid values are RegularGrid, ShapeFile, PolygonFile, or BoundingBox.
> <li>OVERLAY_SHAPE &ndash; Specifies the shape that will be used as the overlay mask, based on the value of OVERLAY_TYPE. This variable can  contain either a grid name, file name or, in the case of a BoundingBox, a set of coordinates.
167d155
< <li>OVERLAY_OUT_CELLID - If it is set to YES, the OVERALY mode process will output grid, egrid, or polygon ID from output file.</li>
172c160
< <h3>3.3.8 Allocate Mode-Specific Variables</h3>
---
> <h3>4.8 Allocate Mode-Specific Variables</h3>
191c179
< <p>To Section 3.4: <a href=grids_ellipsoids_map_proj.html>Specifying Grids, Ellipsoids, and Map Projections</a>
---
> <p>To Section 5: <a href=grids_ellipsoids_map_proj.html>Specifying Grids, Ellipsoids, and Map Projections</a>
6c6
< <title>Filtering a Shapefile</title>
---
> <title>Generating a Filtered Surrogate or Shapefile</title>
12,13c12,13
< <h2>7.3. Filtering a Shapefile</h2>
< <h3>7.3.1 Specifying Filters</h3>
---
> <h2>11. Generating a Filtered Shapefile or Surrogate</h2>
> <h3>11.1 Specifying Filters</h3>
65c65
< <h3>7.3.2 Creating a Filtered Shapefile</h3>
---
> <h3>11.2 Creating a Filtered Shapefile</h3>
76,81c76,78
< <h3>7.3.3 Filtering a Weight Shapefile for Surrogate Computation</h3>
< <p>Generating a filtered weight shapefile for surrogate computation is similar to generating a shapfile without the environment setting for
< surrogate computation. However, in surrogate computation a temporary weight shapefile is created by specified filter function and then used as 
< the input for computing the surrogate weights. The name of this temporary shapefile is specified using the FILTERED_WEIGHT_SHAPES environment variable. This temporary shapefile does not get deleted after a surrogate is generated. Thus, if you are generating surrogates based on some filter criteria, you may want to conserve disk space by manually deleting the temporary shapefile(s) once your surrogates have been generated. Alternatively, you may want to save the temporary shapefile for quality assurance purposes or as an input to future processing. As in the case of generating a filtered shapefile, 
< the FILTER_FILE environment variable is used to specify the name of the filter file to use. </p>
< <p> To create a filtered shapefile in surrogate computation, start with the <a href="filtered_surrogate_bat.txt">filtered_surrogate</a> script and customize it to meet your needs.  For example, be sure that WEIGHT_FILE_NAME, WEIGHT_ATTR_LIST, OUTPUT_FILE_NAME, and SURROGATE_ID are set appropriately for the filtered surrogate. The variables in the filtered_surrogate script that are different from those in the <a href=generate_surrogates_bat.txt>generate_surrogates</a> script are the following:
---
> <h3>11.3 Creating a Filtered Surrogate</h3>
> <p>Generating a filtered surrogate is similar to generating a surrogate without a filter in that the srgcreate program is used with many of the same settings as when generating regular surrogatres. However, when generating a filtered surrogate, a temporary weight shapefile is created and then used as the input for computing the surrogate weights. The name of this temporary shapefile is specified using the FILTERED_WEIGHT_SHAPES environment variable. This temporary shapefile does not get deleted after a surrogate is generated. Thus, if you are generating surrogates based on some filter criteria, you may want to conserve disk space by manually deleting the temporary shapefile(s) once your surrogates have been generated. Alternatively, you may want to save the temporary shapefile for quality assurance purposes or as an input to future processing. As in the case of generating a filtered shapefile, the FILTER_FILE environment variable is used to specify the name of the filter file to use. </p>
> <p> To create a filtered surrogate, start with the <a href="filtered_surrogate_bat.txt">filtered_surrogate</a> script and customize it to meet your needs.  For example, be sure that WEIGHT_FILE_NAME, WEIGHT_ATTR_LIST, OUTPUT_FILE_NAME, and SURROGATE_ID are set appropriately for the filtered surrogate. The variables in the filtered_surrogate script that are different from those in the <a href=generate_surrogates_bat.txt>generate_surrogates</a> script> are the following:
88c85
< <p>To Section 7.4: <a href=converting.html>Converting Map Projections of ShapeFiles</a></p>
---
> <p>To Section 12: <a href=converting.html>Converting Shapefiles to Different Map Projections</a></p>
11c11
< <H2><A name="future"></a>9. Future Enhancements</H2>
---
> <H2><A name="future"></a>15. Future Enhancements</H2>
33c33
< <p>To Section 10: <a href=lic_ext.html>Licenses and External Software Used</a></p>
---
> <p>To Section 16: <a href=lic_ext.html>Licenses and External Software Used</a></p>
12,13c12,13
< <H2>3.4. Specifying Grids, Ellipsoids, and Map Projections</H2>
< <H3>3.4.1 Specifying Grids</H3>
---
> <H2>5. Specifying Grids, Ellipsoids, and Map Projections</H2>
> <H3>5.1 Specifying Grids</H3>
42c42
< <A name="ellipsoid"></a><H3>3.4.2 Using PROJ.4 Specifications for Projections</H3>
---
> <A name="ellipsoid"></a><H3>5.2 Using PROJ.4 Specifications for Projections</H3>
65c65
< <p>To Section 4: <a href=surrogates.html>Surrogate Computation and Quality Assurance Summary</a></p>
---
> <p>To Section 6: <a href=surrogates.html>Generating Surrogates</a></p>
6c6
< <title>Download and Installation</title>
---
> <title>Installing</title>
11c11
< <H2><A name="test case"></a>3.1. Download and Installation</H2>
---
> <H2><A name="test case"></a>3. Installing the Software and Running the Test Case</H2>
13c13
<   The suite of programs and utilities that comprise the Spatial Allocator are written in C, with the exception of srgmerge which is written in C++. To date the software suite has been tested on linux and Windows XP systems.  Identical results have been obtained in every case.</p>
---
>   The suite of programs and utilities that comprise the Spatial Allocator are written in C, with the exception of srgmerge which is written in C++. To date the software suite has been tested on several UNIX platforms and Windows NT/2000, and identical results have been obtained in every case. A set of example scripts is provided with the software to assist users with getting started using the system. <b>These example scripts are provided only to serve as examples - the user is responsible for providing actual input data for his/her application and customizing the scripts accordingly.</b> The example scripts generate a set of surrogates for an <a href="http://www.cep.unc.edu/empd/projects/mims/spatial/nash08km.jpg">8-km grid over Nashville, Tennessee</a>. The input files for the examples were derived from  files available from the EPA at <a href="ftp://ftp.epa.gov/EmisInventory/emiss_shp2003/">ftp://ftp.epa.gov/EmisInventory/emiss_shp2003/</a>. Some of the files are used as is, while others are extracted for Tennessee from the larger national data sets due to their size. The only file that was not from this web site is the cnty_tn shapefile that contains the polygons for the counties of Tennessee. This file was obtained from an independent source of county data.
15,16c15,37
< <p>To download and install the program, perform the following steps:</p>
< <OL TYPE=a>
---
> <P>The following surrogates are generated in the examples: </P>
> <OL>
>   <LI>Airports 
>     
> <LI>Land Area 
>     
> <LI>Ports 
>     
> <LI>Navigable Water 
>     
> <LI>Major Highways 
>     
> <LI>Housing 
>     
> <LI>Population </LI>
> </OL>
> <P><B>NOTE that these are examples only and should not be considered a complete set of surrogates with which to do emissions modeling! </b></p>
> <p>
>   To install the program and run the test case, perform the following steps: 
>       
> <OL>
>   <LI>Download the <A href="http://www.cep.unc.edu/empd/projects/mims/spatial/zip/mimssp_3_2006.zip"> source code, scripts, and documentation</A>. Unzip this file into a new installation folder with at least 40 MB of available disk space. <br>
> &nbsp;
20,21d40
<   <LI>Download the <A href="http://www.cep.unc.edu/empd/projects/mims/spatial/zip/mimssp_3_2006.zip"> source code, scripts, and documentation</A>. Unzip this file into a new installation folder with at least 40 MB of available disk space. <br>
< &nbsp;
28c47,98
<   
---
>   <LI>Scripts are provided for both Windows and Unix users to exercise most of the major functions of the software. In the scripts directory, the Windows versions of the scripts end in .bat and the Unix versions end in .csh. If you cd into the scripts directory, all of the scripts should run without any editing. However, if you wish to run any of the scripts without first cd-ing into the scripts directory, edit the BASDIR setting for all of the scripts in the directory (e.g., generate_surrogates, compare_surrogates) to specify the full path to your installation folder. <br>
> &nbsp;
>   <LI>To test the basic operation of the surrogate creation program (i.e., generating surrogates for point, line, and polygon datasets), <b>run the generate_surrogates script</b> (.csh for UNIX,  .bat for Windows). This will generate a set of test surrogates in the output directory, in addition to some gridded shapefiles that can be viewed in a GIS tool. Note that some warnings will be generated for counties on the edge of the grid since some of their surrogates will not sum to 1.&nbsp; <br>
>   &nbsp;
>   <LI><b>Run the compare_surrogates script</b> (.csh for UNIX,  .bat for Windows) to compare your surrogates with the reference surrogates. Note that compare_surrogates uses the diffsurr utility to compare two sets of surrogates with respect to a specified tolerance. <b>You may find the diffsurr utility useful,</b> for example, when you are creating new surrogates and would like to compare them to the previous versions. Diffsurr takes its arguments from the command line. An example of its usage follows; note that 3 is the numeric ID for the surrogates in the two files (i.e., both surrogates are numbered 3 in this case), although that may not always be true.
>         <pre>
>     diffsurr ..\data\srg_nash_ref.txt 3 ..\output\my_srgs.txt 3 0.00001
>     </pre>
>   <LI><B>Examine the outputs of the program in the output directory. </B>
>         <ul>
>         <p><li>The surrogate file (srg_M_08_99NASH.txt) includes comments preceded by a ! on each line that contains a surrogate fraction. Each comment shows the surrogate numerator and denominator that were used to compute the fraction, and a running sum of the surrogate fractions for that county. For counties entirely within the grid, the sum should be 1; for other counties, the sum should not exceed 1. </li></p>
>         <p><li>Since the OUTPUT_FILE_NAME variable was specified for each surrogate created with the generate_surrogates script, shapefiles were created that contain the sum of the surrogate fraction numerators for each grid cell.  The names of these files start with grid (e.g., grid_airpt_M_08_99NASH.shp), and they are in the map projection of the output grid.  
> A corresponding .csv file is also created that just contains the row, column, and sum for the grid cell. There will be quite a few zeros in these files because only data for Tennessee was processed. For the airports surrogate, many additional grid cells will be zero because many cells do not contain airports.  
> </li></p>
>         </ul>
>   &nbsp;
>   <LI>To see how to <a href=converting.html>change the map projection of a Shapefile</a> using the <b>CONVERT_SHAPE</b> mode of the allocator program run the <b>convert_shape</b> script as follows:
>         <pre>convert_shape ..\data\tn_ports ..\output\tn_ports_ll</pre>
>         <p>The new tn_ports_ll file will have coordinates in a latitude-longitude map projection. The tn_ports_ll file should be easily visualizable by GIS tools. Note that the ports gridded shapefile will not have a nonzero value in each grid cell that has a port because BERTHS was used as the weight and many ports in the weight file have a value of 0 for the BERTHS attribute. To make all grid cells with ports nonzero, use NONE as the value for the WEIGHT_ATTR_LIST when creating the ports surrogate.</li>
>  <br>
>   <li> (Optional) If you require a mapping tool for shapefiles (e.g., for quality assurance of surrogates), you may want to consider ArcExplorer by ESRI, which is downloadable for free from the ESRI web site (<a href="http://www.esri.com">http://www.esri.com</a>).<br>
>     &nbsp;
>   <LI>To see how to <a href=filters.html>filter a shapefile</a> using the FILTER_SHAPE mode of the allocator program, run the <b>filter_shapefile</b> script. Examine the outputs that start with filtered_ in the output directory to see the files that it created. Also, to understand what filter was applied, examine the file county_filter.txt in the data directory. For additional examples of filters, look in the testsuite/filters directory.</li>
>         <br>
>         <LI>To see how to <a href=filters.html>generate a filtered surrogate</a>, run the <b>filtered_surrogate</b> script. Examine the outputs that start with filtered_pop and filtered_srg in the output directory to see the files that it created. Also, to understand what filter was applied, examine the file filter_tn_pop.txt in the data directory. For additional examples of filters, look in the testsuite/filters directory.</li>
>         <br>
>         <LI>To see how to <a href=weight_func.html>generate a surrogate using a weight function</a>, run the <b>weighted_surrogate</b> script. Examine the outputs that start with weighted_ in the output directory to see the files that it created. Also, to understand what weight was applied, look for the WEIGHT_FUNCTION line in the weighted_surrogates script. Also note that the ATTR_WEIGHT is set to USE_FUNCTION.</li>
>         <br>
>         <LI>To see how to <a href=srg_merge.html>generate new surrogates as functions of existing surrogates</a>, cd to the top installation folder, which should contain srgmerge.exe. Now type the following: 
> 	<ul>
> 	<li>If on Windows, type <b>srgmerge data\halfPopHalfHousWin.txt</b>;</li>
> 	<li>If on Unix, type <b>srgmerge.exe data/halfPopHalfHousUnix.txt</b>. </li>
> </ul>(Note the only difference between these halfPopHalfHous files is the direction of the slashes for the file names.) A file named merged_surrogates.txt should appear in the output directory.  The fractions in these file should be 50% of the value for the population surrogate plus 50% of the value for the housing surrogate.</li>
>         <br>
>         <LI>To see how to <a href=gapfill.html>gap fill surrogates with other surrogates</a>, cd to the top installation folder, which should contain srgmerge.exe. Now type the following:
>             <ul>
>               <li>If on Windows: <b>srgmerge data\gapfillAirportsWin.txt</b></li>
>               <li>If on Unix: <b>srgmerge.exe data/gapfillAirportsUnix.txt</b></li>
>             </ul>
>             Note that the only difference between the gapfillAirports files is the direction of the slashes for the file names. A file named gapfilled_surrogates.txt should appear in the output directory. It has a set of new surrogates that are the values from the airports surrogate where available, and values from the population surrogate where there were no values for the airport surrogate. In addition, the population and airports surrogates should be in the output file unchanged from their original state.</li>
>         <br>
> <li>Examples of how to use the ALLOCATE and OVERLAY modes of the allocator program are given in the <a href=alloc.html>General Spatial Allocation and Overlays</a> section.</li>
> <br>
> <li>To convert any DBF file to a .csv file, go to the main installation directory and type:</li>
> <pre>
> dbf2asc <i>input_DBF_file output_csv_file</i>
> </pre>
> <li>To see how to <a href=smoke_bio_inputs.html>create inputs to SMOKE biogenic emissions processing</a> run the script <b>convert_beld.csh</b>. This script runs the program <b>beld3smk</b>. Prior to running the script, you need to download and uncompress the input <a href= "http://www.cep.unc.edu/empd/projects/mims/spatial/zip/tile10.tar.gz">BELD3 data for the Tennessee area</a> (88MB compressed, 1GB uncompressed). This is available from After running convert_beld.csh, the script <b>compare_beld.csh</b>.  This script runs the diffioapi utility to compare the outputs to a reference data set and confirm that the results are the same. <b>Note: The permanent location for the 24 BELD3 tiles in netCDf format has not been determined as of July 9, 2005 due to the large size of the data.  This page will be updated once it has been determined.</b>
> </li> 
> <br>
> <li>A <a href=http://www.cep.unc.edu/empd/projects/mims/spatial/zip/testsuite_7_2005.zip>more comprehensive testsuite</a> with additional tests and examples can be optionally downloaded.</li>
> <br>
31c101
< <p>To Section 3.2: <a href=scripts_test.html>Runing the Test Cases Using Scripts</a></p>
---
> <p>To Section 4: <a href=env_vars.html>Environment Variables Used by the Software</a></p>
16,42c16,17
< <p>Air quality modelers often need geographic data and spatial surrogate 
< computation in generating emission and other spatial input data.  Geographic
< information systems (GIS) can be used in processing, displaying, analyzing,
< and generating any geographic data needed.  However, the use of GIS has 
< created a number of challenges for air quality modelers because GIS systems 
< are generally very expensive and have complex programs with steep learning
< curves.  Currently, most of geographic data needed in air quality modeling
< are generated in GIS by GIS experts.  To address these challenges, 
< the Multimedia Integrated Modeling System (MIMS) Spatial Allocator has 
< been developed to bridge the gap between emission modelers and GIS experts
< by providing a free, easy-to-use, portable suite of utilities for spatial
< surrogate computation, BELD3 landuse data, point in grid conversion, or other 
< data spatial allocation, spatial data overlay, spatial Shapefile selection 
< (filtering), map projection conversion, and other spatial analyses.</p>
< <p>The MIMS Spatial Allocator is licensed as open-source software and provided 
< at no cost by EPA. It uses GIS industry standard ESRI shapefiles and plain 
< text data files for input and output data.  The Spatial Allocator utilities 
< are written in the highly portable C and C++ programming language.  The
< surrogate tools used to run the utilities for all surrogate computation and quality auusrance summary tables are 
< written in the Sun Java language.  The current release includes compilation 
< support and binaries for use with Microsoft Windows, RedHat Linux, and 
< IBM's AIX.  In addition to the supported operating systems, the Spatial 
< Allocator can easily be adapted to run on almost any UNIX-based 
< operating system.</p>
< <P>The Spatial Allocator consists of seven programs.  The first four programs 
< listed below are primary programs, while the other three are secondary 
< programs used for data file comparison and format conversion.</p>
---
> <p>The use of geographic information systems (GISs) to generate surrogates or allocate geographic data  has created a number of challenges for air quality modelers because GIS systems are expensive, complex programs with steep learning curves. To address these challenges, the Multimedia Integrated Modeling System (MIMS) Spatial Allocator has been developed to bridge the gap between emission modelers and GIS analysts by providing a free, easy-to-use,  portable suite of utilities for spatial surrogate generation, map projection conversion, filtering shapefiles, merging surrogates, and other spatial analyses. The MIMS Spatial Allocator is  licensed as open-source software and provided at no cost by EPA. It uses GIS industry standard ESRI shapefiles and plain text data files for input and output data. The Spatial Allocator utilities are written in the highly portable C programming language, and the current release includes compilation support and binaries for use with Microsoft Windows, RedHat Linux, and IBM's AIX. In addition to the supported operating systems, the Spatial Allocator can easily be adapted to run on almost any UNIX-based operating system. </p>
> <P>The Spatial Allocator consists of four programs. The two primary programs are the spatial allocator and the surrogate creator, while the secondary programs are used for merging and differencing surrogates. </p>
44,62c19,21
<   <li>The spatial allocator program (<b>allocator</b>) performs spatial
<       computations such as filtering, overlays, map projection
<       conversion, and conversion of data from one spatial form to
<       another. For example, the allocator can be used to map point source data to modeling grid cells or polygons,
<       aggregate data for county polygons into state polygons, convert data from one
<       grid to another, or create a new shapefile by specifying a filter
<       based on any attributes of an existing shapefile.</li>
<   <p><li>The surrogate creator program (<b>srgcreate</b>) generates surrogates
<       for point-, line-, or polygon-based weight shapefiles such as ports,
<       airports, housing, population, agriculture, water area, and
<       railroads. The surrogate creator tool can generate surrogates for
<       regularly spaced air quality model grids, the WRF/NMM-CMAQ egrids(stacked dismond shape grids), or
<       any modelling polygon shapes (such as census tracts) on a variety of map
<       projections, such as Universal Transverse Mercator (UTM), Lambert
<       Conformal, and latitude-longitude. It supports a variety of
<       standard and user-specified ellipsoids to approximate the shape of
<       the Earth.</li></p>
<   <p><li>The BELD3 converter program (<b>beld3smk</b>) converts 1-km gridded landuse  data to a user-specified modeling grid, egrid, or polygons. 
<   The output of this program  can be used as input to the Normbeis3 program in the SMOKE emissions model. </li></p>
---
>   <li>The spatial allocator program (<b>allocator</b>) performs spatial computations such as filtering, overlays, map projection conversion, and conversion of data from one spatial form to another. For example, the allocator can be used to aggregate data for county polygons into state polygons, convert data from one grid to another, or  create a new shapefile by specifying a filter based on any attributes of an existing shapefile. </li></p>
>   <p><li>The surrogate creator program (<b>srgcreate</b>) generates surrogates for point-, line-, or polygon-based data sets such as ports, airports, housing, population, agriculture, water area, and railroads. The surrogate creator tool can generate surrogates for regularly spaced air quality model grids on a variety of map projections, such as Universal Transverse Mercator (UTM), Lambert Conformal, and latitude-longitude. It supports a variety of standard and user-specified ellipsoids to approximate the shape of the Earth. </li></p>
>   <p><li>The BELD3 converter program (<b>beld3smk</b>) converts 1-km gridded landuse  data to a user-specified modeling grid. The output of this program  can be used as input to the Normbeis3 program in the SMOKE emissions model. </li></p>
68,95c27
< <p>In addition, five Java-based tools for generating and processing spatial surrogates are available in the SurrogateTools.jar file.  
< The tools provide a more user-friendly way to use the Spatial Allocator for computing surrogates from shapefiles, merging 
< existing surrogate data, or gapfilling surrogate data using data from other surrogates without creating system scripts files.  
< The tools also provide quality summary capability for all surrogates generated and surrogate normalization program 
< for any county with surrogates not summed to 1.0.  All tools require Java 1.5 or later version.</p> 
< <ul>
< <li><b>SurrogateTool</b> is a program that runs the spatial allocators to create surrogates,
< merge existing surrogates, and gapfill computed surrogates.  It frees users from creating system
< dependent script files in generating surrogates.  The Surrogate Tool uses user-defined text inputs to control 
< which surrogates are generated, and the format of these files allows them to be easily edited and 
< maintained in a spreadsheet program like Microsoft Excel.</li> 
< <p><li><b>QA tool</b> is used to summarize and provide quality assurance information
< about a list of computed surrogates.  Four reports (Not1, gapfill, nodata, threshold, and summary)
< are generated for surrogates.</li></p>
< <p><li><b>Normalization tool</b> is a program that "normalizes" surrogates for counties that
< do not sum to 1.0 and makes the county surrogate ratio sum to 1. This should be used with care
< because surrogate values for counties on the edge of the grid often should not sum to 1. 
< The tool accepts an exclude list of such counties.</li></p>
< <p><li><b>Gapfilling tool</b> is a Java-based tool that gapfills surrogates as the gapfilling function of srgmerge in the Spatial 
< Allocator does.  But, the gapfilling in srgmerge has an assumption that the lowest surrogate has all counties of interets.  The 
< Java-based gapfilling tool eliminated the assumption to ensure that any gapfilling with proper input surrogates will run successfully.
< <p><li><b>Merging tool</b> is a Java-based tool that merges multiple surrogates to output a new
< surrogate.  The tool is very similar to the merging that is available in the srgmerge program, except that only two part 
< quations are accepted (e.g.a*s1+b*s2 where a+b=1.0). Another difference is that if values are missing for one surrogate 
< for a county, values for the other surrogate are output.</li></p>
< </ul>
< 
< <p>More information on obtaining the programs, running example scripts for each of these programs and utilities, and using Java tools can be found in the section entitled <a href=use.html>Using the Software.</a></p>
---
> <p>More information on running example scripts for each of these programs and utilities can be found in the section entitled <a href=installing.html>Installing the Software and Running the Test Case.</a></p>
101,124c33,41
<   <li>Develop software that (a) reads geospatial data (polygons, lines,
<       and points with attributes that serve as weights in
<       latitude-longitude or projected coordinates) and a description of
<       target polygons (possibly on a different map projection and Earth
<       ellipsoid); (b) allocates the input data to the target polygons
<       based on weighted spatial overlap of the input data and target
<       polygons; and (c) outputs the results (e.g., to generate
<       surrogates to be used as inputs to the Sparse Matrix Operator
<       Kernel Emissions [SMOKE] modeling system)<br>&nbsp;</li>
<   <li>Develop a machine-independent Java surrogate tools which calls the 
<       MIMS Spatial Allocator utilities internally without script files
<       for users to compute one or more surrogates in a single run 
<       based on simple csv and text input files and summarize the computed surrpgates
<       for quality assuance. <br>&nbsp; </li>
<   <li>Develop an automated test suite to test the spatial allocation
<       software's capabilities and report whether or not the program is
<       functioning properly, and if not, what problems were encountered.
<       The results of the software should be verified against a
<       commercial GIS (e.g., MapInfo Professional or ArcGIS).<br>&nbsp;</li>
<   <li>Demonstrate the use of the spatial allocation software to prepare
<       surface water cover, railroads, airports, and housing type
<       information for use by SMOKE (i.e., surrogates).<br>&nbsp;</li>
<   <li>Support incremental development by providing an interface that allows additional data readers and writers to be added in a reasonably simple way. 
<   The <A href="programmers_guide.html">programmer's guide</A> provides some documentation on how to develop a custom reader/writer.</li>
---
>   <li> Develop software that (a) reads geospatial data (polygons, lines, and points with attributes that serve as weights in latitude-longitude or projected coordinates) and a description of target polygons (possibly on a different map projection and Earth ellipsoid); (b) allocates the input data to the target polygons based on weighted spatial overlap of the input data and target polygons; and (c) outputs the results (e.g., to generate surrogates to be used as inputs to the Sparse Matrix Operator Kernel Emissions [SMOKE] modeling system). <br>
> &nbsp;</li>
>   <li>Develop an automated test suite to test the spatial allocation software's capabilities and report whether or not the program is functioning properly, and if not, what problems were encountered. The results of the software should be verified against a commercial GIS (e.g., MapInfo Professional or ArcGIS).<br>
>   &nbsp; </li>
>   <li>Demonstrate the use of the spatial allocation software to prepare surface water cover, railroads, airports, and housing type information for use by SMOKE (i.e., surrogates). <br>
> &nbsp;</li>
>   <li>Support incremental development by providing an interface that allows additional data readers and writers to be added in a reasonably simple way. The <A 
> 
>   href="programmers_guide.html">programmer's guide</A> provides some documentation on how to develop a custom reader/writer.</li>
127,152c44
< <p>The MIMS Spatial Allocator was developed by members of the Carolina
< Environmental Program at the University of North Carolina at Chapel Hill
< (<A href="http://www.cep.unc.edu/">http://www.cep.unc.edu/</A>), some of whom were formerly associated with
< MCNC.  The development and continued maintenance of this software has
< been sponsored by the EPA Office of Research and Development.  The first
< version of the Spatial Allocator software was developed in 2002-2003 to
< provide a tool for performing emission surrogate generation and other
< types of spatial allocation without requiring users to have a GIS.
< Initial releases of the software took place in March 2003 and December
< 2003. A project to update the tool with new features was sponsored in
< 2004-2005, with a first release of the updated tool in January 2005 and
< the current release in April 2006.  The July 2005 release included 
< enhancements related to the general spatial allocation capabilities,
< while the current release focuses on:
< <ul>
< <li>the development of the Java-based surrogate tools,</li>
< <li>the enhancement of the surrogate computation to the polygon output 
<      type (such as census tract based output) and egrid output for the WRF/NMM-CMAQ systems
<      in addition to the regular grid output format,</li>
< <li>the enhancement of the allocator and BELD3 converter programs to process polygon or egrid based output format, </li>
< <li> the addition of projection and ellipsoid comparison functions, </li>
< <li>the comparison of computed 66 EPA surrogates from the tool with the 
<      surrogates provided on the EPA web site computed from ArcInfo, and</li>
< <li>the modification and improvement of the Spatial Allocator codes based
<      on test results.</li>
< </ul>     
---
> <p>The MIMS Spatial Allocator was developed by members of the Carolina Environmental Program at the University of North Carolina at Chapel Hill (<A 
154,160c46,47
< <p>This document includes instructions for the April 2006 release of the
< software and serves as a user's guide for the Spatial Allocator April
< 2006 release (Version 3.2). An older user's guide [<a href="Spatial_Allocator_UG.pdf">
< PDF</a>][<a href="Spatial_Allocator_UG.doc">MS Word</a>] is
< available that offers a different view of the software and was developed
< independently of this user's guide; it has not been updated to include
< any of the enhancements made from 2005.</p>
---
> href="http://www.cep.unc.edu/">http://www.cep.unc.edu/</A>), some of whom were formerly associated with MCNC. The development and continued maintenance of this software has been sponsored by the EPA Office of Research and Development. The first version of the Spatial Allocator software was developed in 2002-2003 to provide a tool for performing emission surrogate generation and other types of spatial allocation without requiring users to have a GIS. Initial releases of the software took place in March 2003 and December 2003. A project to update the tool with new features was sponsored in 2004-2005, with a first release of the updated tool in January 2005 and the current release in July 2005. The January 2005 release included enhancements related to the production of surrogates, while the July 2005 release focuses on more general spatial allocation capabilities. </p>
> <p>This document includes instructions for the July 2005 release of the software and serves as a user's guide for the Spatial Allocator July 2005 release (Version 3.0). An older user's guide [<a href="Spatial_Allocator_UG.pdf">PDF</a>][<a href="Spatial_Allocator_UG.doc">MS Word</a>] is available that offers a different view of the software and was developed independently of this user's guide; it has not been updated to include any of the 2005 enhancements.</p>
11,12c11,12
< <H2>10. Licenses and External Software Used</h2>
< <h3><A name="licenses"></a>10.1 License Information</h3>
---
> <H2>16. Licenses and External Software Used</h2>
> <h3><A name="licenses"></a>16.1 License Information</h3>
11c11
< <H2><A name="revisions"></A>8. Revision History</H2>
---
> <H2><A name="revisions"></A>14. Revision History</H2>
58c58
< <p>To Section 9: <a href=future.html>Future Enhancements</a></p>
---
> <p>To Section 15: <a href=future.html>Future Enhancements</a></p>
11,12c11,12
< <H2><A name="SMOKE_Biogenic"></a>5. Creating Inputs to SMOKE Biogenic Processing</H2>
< <h3>5.1 Creating the Inputs to the SMOKE Program NORMBEIS3</h3>
---
> <H2><A name="SMOKE_Biogenic"></a>13. Creating Inputs to SMOKE Biogenic Processing</H2>
> <h3>13.1 Creating the Inputs to the SMOKE Program NORMBEIS3</h3>
36c36
< <h3>5.2 Comparing I/O API Files</h3>
---
> <h3>13.2 Comparing I/O API Files</h3>
45c45
< <p>To Section 6: <a href="point_to_grid.html">Computing Grid Cells for Point Source Data</a></p>
---
> <p>To Section 14: <a href=rev_history.html>Revision History</a></p>
6c6
< <title>Generating Surrogates by Merging Existing Surrogates</title>
---
> <title>Merging Surrogates</title>
11,13c11,13
< <a name="merge"></a><h2>4.3. Generating Surrogates by Merging Existing Surrogates</h2>
< <h3>4.3.1 The Srgmerge Program</h3>
< <p> In some cases it is desirable to apply a weight function (for more information see the <a href=weight_func.html>Computing Surrogates Using Weight Functions</a>), but the attributes of interest do not reside in a single shapefile, or their units are not consistent. Surrogates can be computed in these cases, but the input surrogates must first be computed independently and then combined using weighted sums. To implement this feature, a separate program called <strong>srgmerge</strong> has been developed. Srgmerge reads previously computed surrogates from files and outputs new surrogates. Srgmerge can both merge surrogates and perform <a href="srg_gapfill.htm">gap filling</a>, which is described in the next section. </p>
---
> <a name="merge"></a><h2>8. Merging Surrogates</h2>
> <h3>8.1 The Srgmerge Program</h3>
> <p> In some cases it is desirable to apply a weight function (for more information see the <a href=weight_func.html>Computing Surrogates Using Weight Functions</a> section), but the attributes of interest do not reside in a single shapefile, or their units are not consistent. Surrogates can be computed in these cases, but the input surrogates must first be computed independently and then combined using weighted sums. To implement this feature, a separate program called <strong>srgmerge</strong> has been developed. Srgmerge reads previously computed surrogates from files and outputs new surrogates. Srgmerge can both merge surrogates and perform <a href="gapfill.html">gap filling</a>, which is described in the next section. </p>
50c50
< <h3>4.3.2 Example Cross-Reference File</h3>
---
> <h3>8.2 Example Cross-Reference File</h3>
54a55
> 
55a57
> 
56a59
> 
57a61
> 
58a63
> 
59a65
> 
60a67
> 
66c73
< <p>To Section 4.4: <a href=srg_gapfill.html>Gap Filling Computed Surrogates</a></p>
---
> <p>To Section 9: <a href=gapfill.html>Gap Filling Surrogates</a></p>
6c6
< <title>Surrogate Computation and Quality Summary</title>
---
> <title>Generating Surrogates</title>
11,22c11,12
< <A name="surrogates"></A><H2>4. Surrogate Computation and Quality Assurance Summary</H2>
< <P>A surrogate used in air quality modelling can be generated from a surrogate weight shapefile, merging existing surrogates, 
< or gapfilling a existing surrogate.  Computer system scripts files with environment variables are often used to call srgcreate or srgmerge 
< in the MIMS Allocator for generating surrogates.</P>
< <p>A Java-based Surrogate Tool was developed to provide a more user-friendly 
< way to use the Spatial Allocator. The Surrogate Tool uses user-defined text inputs to control which surrogates are 
< generated, and the format of these files allows them to be easily edited and maintained in a spreadsheet program like Microsoft Excel.
< The merging and gapfilling programs were re-developed in Java with improved program design and implementation.  
< There is no assumption in the new gapfilling tool.  A Java summary report tool was also developed for quality assurance purpose.  
< The tool summarizes all surrogates listed in a input file (SRGDESC.txt file) based on surrogate codes and counties.  
< It gives reports about gapfilling, not sum to 1, or nodata information for each county of all surrogats.  
< All java programs are packed as part of the SurrogateTools jar file.</p>  
---
> <A name="surrogates"></A><H2>6. Generating Surrogates</H2>
> <P>The <strong>srgcreate</strong> program is used to generate surrogates. The generate_surrogates scripts for <A 
23a14,702
> href="generate_surrogates_csh.txt" target="_blank">UNIX</A> and <A 
> 
> href="generate_surrogates_bat.txt" target="_blank">Windows</A> are provided with the software. These scripts specify: 
>   
> <OL>
>   <LI>where the executables are located
>   <LI>where to get the shapefiles and save the resulting surrogate files
>   <LI>where to find the GRIDDESC file, which contains grid definitions
>   <LI>the name of the grid to use for surrogate generation
>   <LI>whether to put a header line on the surrogate file
>   <LI>whether to include a column summing the surrogate fractions for each data polygon (used for quality assurance purposes)
>   <LI>what files to use for the surrogate generation
>   <LI>what attributes to use in the data and weight files
>   <LI>the name of the output shapefile containing the gridded numerator
>   <LI>what surrogate ID to assign to the surrogate
>   <LI>commands to aggregate the individual surrogates into a single file</LI>
> </OL>
> <p>The scripts contain both mandatory and optional environment variables that control the functioning of the program. The environment variables described in the <a href="env_vars.html">Environment Variables</a> section that impact the functioning of the srgcreate program are the ones listed in subsections with headings that relate to surrogates. Note that the output file containing the gridded surrogate numerators is  output<b> only</b> if the OUTPUT_FILE_NAME is set to something other than NONE. This file is output using the map projection of the output grid (specified by the GRID_NAME environment variable).</p>
> <P>The selection of the weight for the surrogates with the WEIGHT_ATTR_LIST variable is an important decision. For example, if you want to weight the surrogates based on the population at the census tract level, but the surrogates are created at the county level, you must specify the census tract file as your WEIGHT_FILE_NAME file and the name of the population attribute from that file as the WEIGHT_ATTR_LIST. Some important items to note are the following: 
>   
> <UL>
>   <LI>If WEIGHT_ATTR_LIST identifies a floating point or integer attribute, the attribute value will be summed for the grid cell and divided by the sum for the county (as described in the <a href=background.html>Background on Shapefiles and Surrogates</a> section). 
>     
>   <LI>If WEIGHT_ATTR_LIST identifies a string, the weight of each weight object will be set to 1 and the surrogate will essentially represent a count of objects in the grid cell vs. the county. 
>     
> <LI>If WEIGHT_ATTR_LIST is specified as NONE, then the program will use the area of the weight objects if they are polygons, the length if they are lines, and the count if they are points. 
>     
> <LI>The DATA_ID_ATTR should be specified as a unique ID for each data polygon (typically it is the five-digit FIPS state/county code). The value of this attribute will be output for each surrogate. </LI>
> </UL>
> The srgcreate program generates a surrogate file ready to be used in SMOKE. 
> On each line after the header line, the values used by SMOKE are followed by a  &quot;!&quot; and then by the numerator, denominator, and QA sum.
> The format of the surrogate file is described below, and an example is provided in the file <a href=sample_srg.txt>sample_srg.txt<br>
> 
> 
> <P><TABLE BORDER="1" CELLSPACING="0" CELLPADDING="0" WIDTH="664">
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center;page-break-after:
> 
>   avoid"><CENTER><B>Line</B></CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border:solid windowtext 1.5pt;
> 
>   border-left:none;mso-border-left-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER><B>Columns</B></CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border:solid windowtext 1.5pt;
> 
>   border-left:none;mso-border-left-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER><B>Description</B></CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>1</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>A</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">#GRID</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>B</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Grid name</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>C</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">X origin in units of the projection</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>D</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Y origin in units of the projection</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>E</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">X direction cell length in units of the
> 
>       projection</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>F</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Y direction cell length in units of the
> 
>       projection</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>G</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Number of columns</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>H</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Number of rows</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>I</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Number of boundary cells</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>J</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoBodyTextIndent">Projection types:<BR>
> 
>       Latitude-Longitude: &#147;LAT-LON&#148; or &#147;LATGRD3&#148;<BR>
> 
>       Lambert Conformal: &#147;LAMBERT&#148; or &#147;LAMGRD3&#148;<BR>
> 
>       Universal Transverse Mercator: &#147;UTM&#148; or &#147;UTMGRD3&#148;</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>K</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Projection units</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>L</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Projection alpha value</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>M</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Projection beta value</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>N</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Projection gamma value</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>O</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">X-dir projection center in units of the
> 
>       projection</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>P</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Y-dir projection center in units of the
> 
>       projection</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>2+</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>A</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Spatial Surrogates code (area) or County
> 
>       feature/roadway type (mobile) (Integer)</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>B</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Country/State/County Code (integer)</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>C</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Grid column number (Integer)</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>D</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Grid row number (Integer)</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
>   <TR>
> 
>     <TD WIDTH="63" VALIGN="TOP" style="width:47.0pt;border:solid windowtext 1.5pt;
> 
>   border-top:none;mso-border-top-alt:solid windowtext 1.5pt;padding:0in 5.25pt 0in 5.25pt"></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="81" VALIGN="TOP" style="width:61.0pt;border-top:none;border-left:none;
> 
>   border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal" style="text-align:center"><CENTER>E</CENTER></TD><span style='mso-bookmark:PTDAY'></span> 
> 
>     <TD WIDTH="483" VALIGN="TOP" style="width:362.15pt;border-top:none;border-left:
> 
>   none;border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.5pt;
> 
>   mso-border-top-alt:solid windowtext 1.5pt;mso-border-left-alt:solid windowtext 1.5pt;
> 
>   padding:0in 5.25pt 0in 5.25pt">
> 
>       <P class="MsoNormal">Spatial surrogate ratio (area) or fraction
> 
>       of county feature in cell (mobile) (Real)</TD><span style='mso-bookmark:PTDAY'></span> 
> 
>   </TR>
> 
> </TABLE><BR>
25,26c704
< <P>To Section 4.1:<a href=srg_tool.htm>Using Java-based Surrogate Tools for all Surrogate Computations, Quality Summary Table Generation, 
< 	and Surrogate Normalization</a></p>
---
> <P>To Section 7:<a href=weight_func.html>Computing Surrogates Using Weight Functions</a></p>
29,31d706
< 
< 
<  
12,13c12,13
< <h2>Computing Surrogates Using Weight Functions</h2>
< <h3>1. The Need for Weight Functions</h3>
---
> <h2>7. Computing Surrogates Using Weight Functions</h2>
> <h3>7.1 The Need for Weight Functions</h3>
15c15
< Note that more information on creating surrogates without weight functions is given in the <a href="srg_weight.html">Generating Surrogates from Weight Shapefiles</a> section. 
---
> Note that more information on creating surrogates without weight functions is given in the <a href="surrogates.html">Generating Surrogates</a> section. 
24c24
< <a name="valid"></a><h3>2. Weight Function Syntax</h3>
---
> <a name="valid"></a><h3>7.2 Weight Function Syntax</h3>
33c33
< <p>To Section 3.1: <a href=srg_weight.html>Generating Surrogates from Weight Shapefiles</a></p>
---
> <p>To Section 8: <a href=srg_merge.html>Merging Surrogates</a></p>
